<!DOCTYPE html>

<html lang="cn">
  <head>
    <base href="./">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="CoreUI - Open Source Bootstrap Admin Template">
    <meta name="keyword" content="Bootstrap,Admin,Template,Open,Source,jQuery,CSS,HTML,RWD,Dashboard">
    <title>SQTP自动化管理平台</title>
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- Main styles for this application-->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/mystyle.css" rel="stylesheet">
  </head>
  <body class="c-app">
    <div class="c-sidebar  c-sidebar-fixed c-sidebar-lg-show" id="sidebar">
      <div class="c-sidebar-brand d-lg-down-none">
        <svg class="c-sidebar-brand-full" width="118" height="46" alt="CoreUI Logo">
          <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-apple"></use>
        </svg>
      </div>
      <ul class="c-sidebar-nav">
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="index.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-speedometer"></use>
            </svg> 仪表盘<span class="badge badge-info">NEW</span></a></li>
        <li class="c-sidebar-nav-item c-sidebar-nav-dropdown"><a class="c-sidebar-nav-link c-sidebar-nav-dropdown-toggle" href="#">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-home"></use>
            </svg> Auto Test</a>
          <ul class="c-sidebar-nav-dropdown-items">
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="testcase.html">
              <span class="c-sidebar-nav-icon"></span> 测试用例</a></li>
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="webinterface.html">
              <span class="c-sidebar-nav-icon"></span> web接口</a></li>
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="testplan.html">
              <span class="c-sidebar-nav-icon"></span> 测试计划</a></li>
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="testreport.html">
              <span class="c-sidebar-nav-icon"></span> 测试报告</a></li>
          </ul>
        </li>
        <li class="c-sidebar-nav-item c-sidebar-nav-dropdown"><a class="c-sidebar-nav-link c-sidebar-nav-dropdown-toggle" href="#">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-settings"></use>
            </svg> 系统设置</a>
          <ul class="c-sidebar-nav-dropdown-items">
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="projects.html">
              <svg class="c-icon mr-2">
                <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-gradle"></use>
              </svg> 项目管理</a></li>
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="environments.html">
              <svg class="c-icon mr-2">
                <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-grafana"></use>
              </svg> 环境管理</a></li>
            <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="users.html">
              <svg class="c-icon mr-2">
                <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-redhat"></use>
              </svg> 用户管理</a></li>
          </ul>
        </li>
          <li class="c-sidebar-nav-item c-sidebar-nav-dropdown"><a class="c-sidebar-nav-link c-sidebar-nav-dropdown-toggle" href="#">
              <svg class="c-sidebar-nav-icon">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-settings"></use>
              </svg> JIRA</a>
              <ul class="c-sidebar-nav-dropdown-items">
                  <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="jira_project.html">
                      <svg class="c-icon mr-2">
                          <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-gradle"></use>
                      </svg> 项目管理</a></li>
                  <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="jira_case.html">
                      <svg class="c-icon mr-2">
                          <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-grafana"></use>
                      </svg> 用例管理</a></li>
                  <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="jira_bug.html">
                      <svg class="c-icon mr-2">
                          <use xlink:href="vendors/@coreui/icons/svg/brand.svg#cib-redhat"></use>
                      </svg> 缺陷管理</a></li>
              </ul>
          </li>
        <li class="c-sidebar-nav-divider"></li>
      </ul>
      <button class="c-sidebar-minimizer c-class-toggler" type="button" data-target="_parent" data-class="c-sidebar-minimized"></button>
    </div>
    <div class="c-wrapper c-fixed-components">
      <header class="c-header c-header-light c-header-fixed c-header-with-subheader">
        <button class="c-header-toggler c-class-toggler d-lg-none mfe-auto" type="button" data-target="#sidebar" data-class="c-sidebar-show">
          <svg class="c-icon c-icon-lg">
            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-menu"></use>
          </svg>
        </button><a class="c-header-brand d-lg-none" href="#">
          <svg width="118" height="46" alt="CoreUI Logo">
            <use xlink:href="assets/brand/coreui.svg#full"></use>
          </svg></a>
        <button class="c-header-toggler c-class-toggler mfs-3 d-md-down-none" type="button" data-target="#sidebar" data-class="c-sidebar-lg-show" responsive="true">
          <svg class="c-icon c-icon-lg">
            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-menu"></use>
          </svg>
        </button>
        <ul class="c-header-nav d-md-down-none w-50">
          <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="index.html">主页</a></li>

        </ul>
        <ul class="c-header-nav ml-auto mr-4">
          <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#">
              <svg class="c-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
              </svg></a></li>
          <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#">
              <svg class="c-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-list-rich"></use>
              </svg></a></li>
          <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#">
              <svg class="c-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
              </svg></a></li>
          <li class="c-header-nav-item dropdown"><a class="c-header-nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
              <div class="c-avatar"><img class="c-avatar-img" src="assets/img/avatars/5.jpg" alt="user@email.com"></div>
            </a>
            <div class="dropdown-menu dropdown-menu-right pt-0">
              <div class="dropdown-header bg-light py-2"><strong>Account</strong></div><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
                </svg> Messages<span class="badge badge-success ml-auto">30</span></a><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-task"></use>
                </svg> Tasks<span class="badge badge-danger ml-auto">10</span></a>
              <div class="dropdown-header bg-light py-2"><strong>Settings</strong></div><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-settings"></use>
                </svg> Settings</a><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-file"></use>
                </svg> Projects<span class="badge badge-primary ml-auto">42</span></a>
              <div class="dropdown-divider"></div><a class="dropdown-item"  >
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-account-logout"></use>
                </svg> Logout</a>
            </div>
          </li>
        </ul>
        <div class="c-subheader px-3">
          <!-- 面包栏菜单-->
          <ol class="breadcrumb border-0 m-0">
            <li class="breadcrumb-item">主页</li>
            <li class="breadcrumb-item"><a href="testcase.html">用例列表</a></li>
            <li class="breadcrumb-item active">用例详情</li>
          </ol>
        </div>
      </header>
      <div class="c-body">
        <main class="c-main">
          <div class="card">
            <div class="card-header"><strong>用例详情</strong></div>
            <div class="card-body">
              <form class="form-horizontal" action="/case/cases" method="POST" enctype="application/json">
                <input type="hidden" name="_method" value="PUT">
                <div class="form-group row">
                  <label class="col-md-2 col-form-label" for="text-input">用例描述</label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" name="desc" placeholder="用例描述" required>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-2 col-form-label" for="text-input">状态</label>
                  <div class="col-md-9">
                  <label class="c-switch c-switch-label c-switch-pill c-switch-success">
                    <input class="c-switch-input " type="checkbox" name="status"><span class="c-switch-slider" data-checked="On" data-unchecked="Off"></span>
                  </label>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-2 col-form-label" for="text-input">项目</label>
                  <div class="col-md-2">
                    <select class="form-control" name="project_id">
                      <option>选择项目</option>
                      <option value="2">菜单2</option>
                      <option value="3">菜单3</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-2 col-form-label" for="text-input">模块</label>
                  <div class="col-md-2">
                    <select class="form-control " name="module_id">
                      <option>选择模块</option>
                      <option value="2">菜单2</option>
                      <option value="3">菜单3</option>
                    </select>
                  </div>
                </div>

              </form>
            </div>
            <div class="card-footer">
              <strong>添加用例步骤</strong>
              <button class="btn btn-warning btn-sm">添加一行</button>
              <table class="table table-responsive table-borderless">
                <thead>
                <tr>
                  <th id="step_no">序号</th>
                  <th id="c_type">接口类型</th>
                  <th id="httpapi_id">测试接口</th>
                  <th id="expected">预期结果</th>
                  <th id="desc">步骤描述</th>
                  <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                  <td><h5>1</h5><span title=""></span></td>
                  <td><select class="form-control" name="httpapi_type">
                    <option  value="0" selected>http</option>
                    <option  value="1">https</option>
                  </select></td>
                  <td><select class="form-control" name="httpapi_id">
                    <option  value="1">业务1</option>
                    <option  value="2" selected>业务2</option>
                    <option  value="3">业务3</option>
                  </select></td>
                    <td><input class="form-control" type="text" name="expect" placeholder="预期结果"></td>
                    <td><input class="form-control" type="text" name="step_desc" placeholder="步骤描述"></td>
                  <td>
                    <button class="btn btn-pill btn-sm btn-outline-info" onclick="save_step(this,getUrlParam('case_id'))"> 保存</button>
                    <button class="btn btn-pill btn-sm btn-outline-danger" onclick="delete_step(this)" > 删除</button>
                  </td>
                </tr>
                </tbody>
              </table>

              <button class="btn btn-primary" type="submit"> 修改</button>
              <button class="btn btn-danger" type="reset" > 重置</button>
              <a class="btn btn-success" type="button" href="testcase.html"> 返回</a>
            </div>
          </div>
        </main>
<!--        页脚 -->
        <footer class="c-footer">
          <div><a href="http://songqinnet.com/" target="_blank">SQ-Autotest</a> © 2021 creativeLabs.</div>
          <div class="ml-auto">Contract me&nbsp;<a href="http://songqinnet.com/" target="_blank">SQ-Autotest</a></div>
        </footer>
      </div>
    </div>
    <!-- CoreUI and necessary plugins-->
    <script src="vendors/@coreui/coreui/js/coreui.bundle.min.js"></script>
    <!--[if IE]><!-->
    <script src="vendors/@coreui/icons/js/svgxuse.min.js"></script>
    <!--<![endif]-->
    <script src="scripts/libs/jquery.min.js"></script>
    <script src="scripts/common.js"></script>
    <script src="scripts/testcase.js"></script>
    <script>
      //测试用例
      $(document).ready(
        //载入case详情
        case_view(getUrlParam('case_id')),
        //添加一行
        $('.card-footer>.btn-warning').bind('click',function (){
          //拷贝最后一行
          let tr = $('.card-footer tbody tr:nth-last-child(1)')[0].outerHTML;
          let num = $(tr).find('td>h5').text();
          num = parseInt(num)+1  //序号自增
          let new_line = $(tr);
          new_line.find('td:nth-child(1)').html('<h5>'+num+'</h5>'); //自增的ID回写HTML
          $('.card-footer tbody').append(new_line[0].outerHTML);
        }),
        // 按钮状态改变
        $('span.c-switch-slider').bind('click',function (){
          let status_btn = $('.c-switch-input[name="status"]')
          if(status_btn.val() === 'true'){
            // console.log('set false...')
            status_btn.val(false);
          }else{
            // console.log('set true...')
            status_btn.val(true);
          }
        }),
        $('.card-footer .btn-primary').click(function () {
            //提交按钮
            update_case(getUrlParam('case_id'));
        }),
      )
    </script>
  </body>
</html>